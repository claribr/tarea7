<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" /> <title>Tarea Siete</title>
    <script src="react.development.js"></script>
    <script src="react-dom.development.js"></script>
    <script src="babel.min.js"></script>
    <script type="text/javascript" src="all.json"></script>
    
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
    var dataLocal = data;


      class Region extends React.Component {
      constructor(props) {
            super(props);
            this.state = {
                data:dataLocal
            };
          }
   
          render() {
            Array.prototype.unique=function(a){
              return function(){return this.filter(a)}}(function(a,b,c){return c.indexOf(a,b+1)<0
            });
              const region = [...new Set(this.state.data.map(all => all.region))];
              const subRegion = [...new Set(this.state.data.map(all => all.subRegion))];
              var state = [];
              var prueba = region.forEach(function(v,i){
                  var subregions = [];
                  dataLocal.forEach( function(valor, indice) {
                    if(valor.region == v){
                      subregions.push(valor.subRegion); 
                    }
                  
                  })
                  subregions = subregions.unique();
                  var obj = {
                    'name': v,
                    'subregiones': subregions
                  };
                  state.push(obj);
              });
              var nuevo = state.forEach(function(value, index){ console.log(value.subregiones[index])});
              return (
                <div>
                  {region.map(regiones => <div><h1>{regiones}</h1>{state.map(subregion => subregion.name == regiones? (<div>{subregion.subregiones.map(value => <h2>{value}</h2>{this.state.data(country => country.subRegion == value? (<p>{country.name}</p>): "")})}</div>): "" )}</div>)}</div>
                );
          }   
      }
	  ReactDOM.render(<Region/>,
      document.getElementById('root'));
    </script>
  </body>
</html>